<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IdP Initiated SSO Test</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: #f4f4f9; margin: 0; padding: 20px; box-sizing: border-box; }
        
        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card { background: white; padding: 2.5rem 2rem 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 800px; text-align: center; position: relative; }
        
        h2 { color: #333; margin-bottom: 1.5rem; font-size: 1.4rem; word-break: keep-all; margin-top: 10px; }
        .form-group { margin-bottom: 1rem; text-align: left; }
        label { display: block; margin-bottom: 0.5rem; color: #666; font-size: 0.9rem; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
        button { width: 100%; padding: 12px; background-color: #0070f3; color: white; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer; transition: background 0.2s; font-weight: bold; }
        button:hover { background-color: #0051a2; }
        .note { margin-top: 1rem; font-size: 0.8rem; color: #888; }
        
        /* ìƒë‹¨ ê³µì§€ ìŠ¤íƒ€ì¼ */
        .notice { margin-bottom: 20px; background: #fffae6; color: #665c00; padding: 15px; border: 1px solid #ffe58f; border-radius: 8px; font-size: 0.85rem; text-align: left; line-height: 1.5; width: 100%; max-width: 800px; box-sizing: border-box; }
        .notice p { margin: 5px 0; }
        .notice strong { color: #d63031; }

        /* í•˜ë‹¨ ì„¤ëª…(Accordion) ìŠ¤íƒ€ì¼ */
        details { margin-top: 15px; text-align: left; border-top: 1px solid #eee; padding-top: 15px; }
        summary { cursor: pointer; font-size: 0.9rem; font-weight: bold; color: #444; list-style: none; display: flex; align-items: center; justify-content: center; padding: 5px; }
        summary:hover { background-color: #f8f9fa; border-radius: 5px; }
        summary::after { content: " â–¼"; font-size: 0.7rem; margin-left: 5px; }
        details[open] summary::after { content: " â–²"; }
        
        .explanation { font-size: 0.85rem; color: #555; background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px; line-height: 1.6; border: 1px solid #e9ecef; }
        .step { display: flex; margin-bottom: 10px; align-items: flex-start; }
        .step-num { flex-shrink: 0; background: #0070f3; color: white; width: 20px; height: 20px; border-radius: 50%; text-align: center; line-height: 20px; font-size: 0.75rem; margin-right: 10px; margin-top: 2px; font-weight: bold; }
        
        /* ë‹¤ì´ì–´ê·¸ë¨ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        .flow-image { width: 100%; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 15px; }
        
        /* ë§í¬ ìŠ¤íƒ€ì¼ */
        .test-link { color: #0070f3; text-decoration: none; font-weight: bold; display: inline-block; margin-top: 4px; }
        .test-link:hover { text-decoration: underline; }

        /* PDF ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ */
        .pdf-badge { 
            position: absolute; top: 20px; right: 20px; 
            display: inline-flex; align-items: center; 
            background-color: #f1f3f5; color: #495057; 
            padding: 8px 14px; border-radius: 20px; 
            text-decoration: none; font-size: 0.8rem; font-weight: 600; 
            transition: all 0.2s; border: 1px solid #dee2e6; z-index: 10;
        }
        .pdf-badge:hover { background-color: #e9ecef; color: #0070f3; border-color: #0070f3; }
        .pdf-icon { margin-right: 5px; }

        /* [ì¶”ê°€ë¨] í•„ìš” ì •ë³´ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .provider-box { background: white; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px; overflow: hidden; }
        .provider-header { background: #e9ecef; padding: 8px 15px; font-weight: bold; color: #333; border-bottom: 1px solid #ddd; font-size: 0.9rem; }
        .provider-content { padding: 15px; }
        .info-row { margin-bottom: 12px; }
        .info-label { font-weight: 600; color: #555; display: block; margin-bottom: 3px; font-size: 0.85rem; }
        .info-val { background: #f1f3f5; padding: 6px 10px; border-radius: 4px; font-family: monospace; font-size: 0.85rem; color: #d63384; word-break: break-all; display: block; border: 1px solid #dee2e6; }
        .common-alert { background-color: #fff0f6; color: #c03452; padding: 10px; border-radius: 6px; font-weight: bold; text-align: center; margin-bottom: 15px; border: 1px solid #ffdeeb; }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 600px) {
            .pdf-badge { position: static; display: inline-flex; margin-bottom: 15px; float: right; }
            .card { padding-top: 2rem; }
        }
    </style>
</head>
<body>
    <div style="display:flex; flex-direction: column; align-items: center; width: 100%;">
        
        <div class="notice">
            <p>â„¹ï¸ í•´ë‹¹ í˜ì´ì§€ëŠ” <b>eformsign test ì„œë²„</b>ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.</p>
            <p>â€¢ í˜„ì¬ <b>@test.co.kr</b> ë„ë©”ì¸ë§Œ í—ˆìš©ë˜ë„ë¡ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. (ì‹¤ì œ ì—°ë™ ì‹œì—ëŠ” ì›í•˜ëŠ” ë„ë©”ì¸ìœ¼ë¡œ ì„¤ì •í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</p>
            <p>â€¢ ë°”ë¡œê°€ê¸°ë¥¼ ëˆ„ë¥´ì‹œë©´ https://test-kr-service.eformsign.com/v1.0/saml_redirect ë¡œ saml responseê°€ ì „ì†¡ë˜ë©° eformsign ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë©ë‹ˆë‹¤.</p>
            <p>â€¢ ë¡œê·¸ì¸ ì‹œ <b>ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</b> íŒì—… ë°œìƒ í›„ ë¡œê·¸ì¸ì´ ë˜ëŠ”ë° ì´ëŠ” name attributeê°’ì„ ì „ë‹¬ ì•ˆí•˜ì—¬ ë°œìƒí•œ í˜„ìƒìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ í˜„ìƒì´ë‚˜ <strong>ì‹¤ì œ ì—°ë™ ì‹œì—ëŠ” name attributeê°’ì„ ë°˜ë“œì‹œ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.</strong></p>
        </div>

        <div class="card">
            <a href="/file/eformsign SSO ì—°ë™ ê°€ì´ë“œ (SAML 2.0)_v1.0.pdf" download="eformsign SSO ì—°ë™ ê°€ì´ë“œ (SAML 2.0)_v1.0.pdf" class="pdf-badge" title="eformsign SSO ì—°ë™ ê°€ì´ë“œ (SAML 2.0) ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ">
                <span class="pdf-icon">ğŸ“„</span> ê°€ì´ë“œ ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ!.pdf
            </a>

            <h2>IdP â†’ ì´í¼ì‚¬ì¸(SP)<br>SSO ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h2>
            <p style="color:#666; font-size: 0.9rem; margin-bottom: 20px;">
                ì‚¬ìš©ìê°€ ë³„ë„ ë¡œê·¸ì¸ ì—†ì´,<br>ë²„íŠ¼ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ì´í¼ì‚¬ì¸ì— ì ‘ì†í•©ë‹ˆë‹¤.
            </p>
            
            <form action="/api/idp-initiated-login" method="POST">
                <div class="form-group">
                    <label>ì‚¬ìš©ì ì´ë©”ì¼ (ID)</label>
                    <input type="email" name="email" value="test@test.co.kr" required>
                </div>
                <div class="form-group">
                    <label>ì‚¬ìš©ì ì´ë¦„</label>
                    <input type="text" name="name" value="í…ŒìŠ¤íŠ¸ìœ ì €" required>
                </div>
                
                <button type="submit">eformsign ë°”ë¡œê°€ê¸° ğŸš€</button>
            </form>
            
            <p class="note">â€» IdP Initiated SSO (ë¬´ê²€ì¦ ë¡œê·¸ì¸) í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.</p>

            <details>
                <summary>ğŸ› ï¸ ì´ í˜ì´ì§€ì˜ ì‘ë™ ì›ë¦¬ê°€ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?</summary>
                <div class="explanation">
                    <p style="margin-top:0; font-weight:bold; color:#333; border-bottom:1px solid #ddd; padding-bottom:5px; margin-bottom:10px;">
                        IdP Initiated SSO í”„ë¡œì„¸ìŠ¤ (ì¦‰ì‹œ ì‹¤í–‰)
                    </p>
                    <div class="step">
                        <span class="step-num">1</span>
                        <span>ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì…ë ¥ëœ ì •ë³´ê°€ ë‚´ë¶€ ì„œë²„ API(<code>/api/idp-initiated-login</code>)ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.</span>
                    </div>
                    <div class="step">
                        <span class="step-num">2</span>
                        <span>ì„œë²„(IdP)ëŠ” ë¹„ë°€í‚¤(Private Key)ë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ì ì •ë³´ë¥¼ ì•”í˜¸í™” ì„œëª…í•œ <strong>SAML Response(XML)</strong>ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</span>
                    </div>
                    <div class="step">
                        <span class="step-num">3</span>
                        <span>ì„œë²„ëŠ” ìƒì„±ëœ ë°ì´í„°ë¥¼ ë‹´ì€ <strong>ìˆ¨ê²¨ì§„ í¼(Hidden Form)</strong>ì„ ë¸Œë¼ìš°ì €ì— ì‘ë‹µìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤.</span>
                    </div>
                    <div class="step">
                        <span class="step-num">4</span>
                        <span>ë¸Œë¼ìš°ì €ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ì´ í¼ì„ <strong>ì´í¼ì‚¬ì¸ì˜ SAML Redirect URL( https://test-kr-service.eformsign.com/v1.0/saml_redirect)</strong>ë¡œ ì „ì†¡(POST)í•©ë‹ˆë‹¤.</span>
                    </div>
                    <div class="step">
                        <span class="step-num">5</span>
                        <span>ì´í¼ì‚¬ì¸ì€ ì„œëª…ì„ ê²€ì¦í•˜ê³ , ìœ íš¨í•œ ê²½ìš° ì¦‰ì‹œ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</span>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ” eformsign ì „ì²´ ë¡œê·¸ì¸ ê³¼ì •ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?</summary>
                <div class="explanation">
                    <img src="/img/sso_flow.png" alt="eformsign SAML SSO Flow" class="flow-image" onerror="this.style.display='none'">
                    
                    <p style="margin-top:0; font-weight:bold; color:#333; border-bottom:1px solid #ddd; padding-bottom:5px; margin-bottom:10px;">
                        eformsign SAML 2.0 SSO ë¡œê·¸ì¸ íë¦„
                    </p>
                    <div class="step">
                        <span class="step-num">1</span>
                        <span>
                            <strong>ë¡œê·¸ì¸ ì‹œë„:</strong> ì‚¬ìš©ìê°€ eformsign ì ‘ì† í›„ ë¡œê·¸ì¸ ì°½ì— ID(ì´ë©”ì¼)ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.<br>
                            <a href="https://test.eformsign.com/login.html" target="_blank" class="test-link">ğŸ‘‰ ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ê¸°!</a>
                            <br><span style="font-size:0.8rem; color:#888;">(ìƒˆ ì°½ì—ì„œ IDì— <code>test@test.co.kr</code> ì…ë ¥)</span>
                        </span>
                    </div>
                    <div class="step">
                        <span class="step-num">2</span>
                        <span><strong>ë„ë©”ì¸ ê²€ì¦:</strong> eformsignì€ ì…ë ¥ëœ IDì˜ ë„ë©”ì¸(@test.co.kr)ì„ í™•ì¸í•˜ì—¬ SSO ì—°ë™ ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.</span>
                    </div>
                    <div class="step">
                        <span class="step-num">3</span>
                        <span><strong>ë¦¬ë‹¤ì´ë ‰íŠ¸:</strong> ì—°ë™ëœ ë„ë©”ì¸ì¸ ê²½ìš°, ì‚¬ìš©ìë¥¼ ê³ ê°ì‚¬ì˜ <strong>IdP ë¡œê·¸ì¸ í˜ì´ì§€</strong>ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.</span>
                    </div>
                    <div class="step">
                        <span class="step-num">4</span>
                        <span><strong>ì¸ì¦ ë° ë°ì´í„° ì¤€ë¹„:</strong> ê³ ê°ì‚¬ ì„œë²„(IdP)ì—ì„œ ë¡œê·¸ì¸ì„ ìˆ˜í–‰í•˜ê³ , ì‚¬ìš©ì ì •ë³´(NameID, Email, Name)ë¥¼ ë‹´ì€ ë°ì´í„°ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.</span>
                    </div>
                    <div class="step">
                        <span class="step-num">5</span>
                        <span><strong>ì •ë³´ ì „ë‹¬ (Response):</strong> IdPëŠ” ì „ì ì„œëª…ëœ <strong>SAML Response</strong>ë¥¼ ìƒì„±í•˜ì—¬ ì´í¼ì‚¬ì¸(Redirect URL)ìœ¼ë¡œ ë‹¤ì‹œ ë³´ëƒ…ë‹ˆë‹¤.</span>
                    </div>
                    <div class="step">
                        <span class="step-num">6</span>
                        <span><strong>ìµœì¢… ë¡œê·¸ì¸:</strong> eformsignì€ ì „ë‹¬ë°›ì€ saml responseë¥¼ ê²€ì¦í•˜ê³ , NameId, Attributeì˜ email,nameê°’ì„ ë¹„êµí•˜ì—¬ ì¼ì¹˜í•˜ëŠ” ë©¤ë²„ê°€ ìˆìœ¼ë©´ ë¡œê·¸ì¸ì„ ì™„ë£Œí•©ë‹ˆë‹¤. (ì—†ìœ¼ë©´ íšŒì›ê°€ì… ì´ë™)</span>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ“‹ eformsign ì—°ë™ ì‹ ì²­ ì‹œ í•„ìš” ì •ë³´ (Okta/Azure/ê¸°íƒ€)</summary>
                <div class="explanation">
                    <div class="common-alert">
                        ğŸ“¢ [ê³µí†µ í•„ìˆ˜] SAML Metadata ì •ë³´(XML íŒŒì¼)ë¥¼ ë°˜ë“œì‹œ í•¨ê»˜ ì „ë‹¬í•´ ì£¼ì„¸ìš”.
                    </div>

                    <div class="provider-box">
                        <div class="provider-header">ğŸ”¹ Okta ì‚¬ìš© ì‹œ</div>
                        <div class="provider-content">
                            <div class="info-row">
                                <span class="info-label">1. ì´ë©”ì¼ ë„ë©”ì¸</span>
                                <span class="info-val">ex) forcs.com</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">2. eformsign íšŒì‚¬ ID</span>
                                <span class="info-val">ex) 194ade374b2d4f97ab228f875725d966</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">3. Login URL</span>
                                <span class="info-val">ex) https://trial-123.okta.com/app/trial.../sso/saml</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">4. Issuer</span>
                                <span class="info-val">ex) http://www.okta.com/exk123...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">5. SSO ì†”ë£¨ì…˜ ì •ë³´</span>
                                <span class="info-val">okta</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">6. Attribute ì„¤ì • ì •ë³´</span>
                                <span class="info-val">ex) "name": "displayName", "email": "email"</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">7. Redirect URL (SaaS / CSAP)</span>
                                <span class="info-val">
                                    (SaaS): https://kr-service.eformsign.com/v1.0/saml_redirect<br>
                                    (CSAP): https://www.gov-eformsign.com/Service/v1.0/saml_redirect
                                </span>
                                <div style="font-size:0.8rem; color:#666; margin-top:5px;">â€» ìœ„ URL ì¤‘ ì‚¬ìš©í•˜ì‹œëŠ” í™˜ê²½ì— ë§ëŠ” ê²ƒì„ ì„¤ì • í›„ ì „ë‹¬í•´ì£¼ì„¸ìš”.</div>
                            </div>
                        </div>
                    </div>

                    <div class="provider-box">
                        <div class="provider-header">ğŸ”¹ Azure AD ì‚¬ìš© ì‹œ</div>
                        <div class="provider-content">
                            <div class="info-row">
                                <span class="info-label">1. ì´ë©”ì¼ ë„ë©”ì¸</span>
                                <span class="info-val">ex) forcs.com</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">2. eformsign íšŒì‚¬ ID</span>
                                <span class="info-val">ex) 194ade374b2d4f97ab228f875725d966</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">3. Login URL</span>
                                <span class="info-val">ex) https://login.microsoftonline.com/.../saml2</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">4. SSO ì†”ë£¨ì…˜ ì •ë³´</span>
                                <span class="info-val">azure</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">5. Request ID</span>
                                <span class="info-val">ex) F84D888AA3B44C1B84...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">6. Entity ID (ì‹ë³„ì)</span>
                                <span class="info-val">ex) http://adapplicationregistry.onmicrosoft.com/...</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">7. Attribute ì„¤ì • ì •ë³´</span>
                                <span class="info-val">
                                    ex)
                                    "name": "http://schemas.microsoft.com/identity/claims/displayname",<br>
                                    "email": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"
                                </span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">8. Redirect URL (SaaS / CSAP)</span>
                                <span class="info-val">
                                    (SaaS): https://kr-service.eformsign.com/v1.0/saml_redirect<br>
                                    (CSAP): https://www.gov-eformsign.com/Service/v1.0/saml_redirect
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="provider-box" style="margin-bottom:0;">
                        <div class="provider-header">ğŸ”¹ ê¸°íƒ€ SSO ì†”ë£¨ì…˜ ì‚¬ìš© ì‹œ</div>
                        <div class="provider-content">
                            <div class="info-row">
                                <span class="info-label">1. ì´ë©”ì¼ ë„ë©”ì¸</span>
                                <span class="info-val">ex) forcs.com</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">2. eformsign íšŒì‚¬ ID</span>
                                <span class="info-val">ex) 194ade374b2d4f97ab228f875725d966</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">3. Login URL</span>
                                <span class="info-val">ex) https://your-domain/login/saml2</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">4. SSO ì†”ë£¨ì…˜ ì •ë³´</span>
                                <span class="info-val">ì‚¬ìš© ì¤‘ì¸ ì†”ë£¨ì…˜ ì´ë¦„</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">5. Entity ID (ì‹ë³„ì)</span>
                                <span class="info-val">ì„¤ì •í•˜ì‹  ì‹ë³„ì ê°’</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">6. Attribute ì„¤ì • ì •ë³´</span>
                                <span class="info-val">ex) "name": "name", "email": "email"</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">7. Redirect URL (SaaS / CSAP)</span>
                                <span class="info-val">
                                    (SaaS): https://kr-service.eformsign.com/v1.0/saml_redirect<br>
                                    (CSAP): https://www.gov-eformsign.com/Service/v1.0/saml_redirect
                                </span>
                            </div>
                        </div>
                    </div>

                </div>
            </details>

        </div>
    </div>
</body>
</html>