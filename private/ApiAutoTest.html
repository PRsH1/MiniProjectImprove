<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Integrated API Test Dashboard V26 (OPA 037 Added)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body { padding: 20px; background-color: #f8f9fa; }
        .container { max-width: 1200px; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .status-pass { color: green; font-weight: bold; }
        .status-fail { color: red; font-weight: bold; }
        .status-skip { color: #f0ad4e; font-weight: bold; }
        .log-box { font-size: 0.85em; max-height: 200px; overflow-y: auto; background: #eee; padding: 10px; display: none; margin-top: 5px; border-radius: 5px; white-space: pre-wrap; }
        .special-config { background-color: #e3f2fd; border: 1px solid #90caf9; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .field-row { background: #fff; padding: 8px; border-radius: 4px; border: 1px solid #dee2e6; margin-bottom: 5px; }
        .separator { border-top: 1px dashed #90caf9; margin: 20px 0; }
        .section-title { font-weight: bold; color: #495057; margin-bottom: 10px; }
        
        .opa-badge { 
            display: flex; 
            align-items: center;
            padding: 8px 12px; 
            margin-bottom: 5px; 
            background: #fff; 
            border: 1px solid #dee2e6; 
            border-radius: 6px; 
            font-size: 0.9em; 
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .opa-code { font-weight: bold; color: #333; margin-right: 5px; display: block;}
        .opa-name { color: #666; font-size: 0.9em; }
        .method-badge { width: 60px; text-align: center; margin-right: 10px; flex-shrink: 0; }
    </style>
</head>
<body>

<div class="container">
    <h2 class="mb-4">ğŸš€ API ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ (Total V26)</h2>

    <div class="accordion mb-4" id="accordionApiList">
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed fw-bold bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseList">
                    ğŸ“‹ ì§€ì› API ëª©ë¡ ë° ë©”ì†Œë“œ í™•ì¸ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)
                </button>
            </h2>
            <div id="collapseList" class="accordion-collapse collapse" data-bs-parent="#accordionApiList">
                <div class="accordion-body bg-light">
                    <div class="row g-2" id="apiListContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-3">
        <div class="card-header bg-dark text-white">1. ê³µí†µ ì„¤ì • (ê¸°ë³¸ ì¸ì¦)</div>
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Base URL</label>
                    <input type="text" id="baseUrl" class="form-control" value="https://api.eformsign.com" placeholder="https://...">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Access Token (Bearer)</label>
                    <input type="text" id="accessToken" class="form-control" placeholder="ì¼ë°˜ APIìš© í† í°">
                </div>
            </div>
        </div>
    </div>

    <div class="special-config">
        <h5 class="fw-bold text-primary mb-3">âš¡ ì‹œë‚˜ë¦¬ì˜¤ë³„ í•„ìˆ˜ ë°ì´í„° ì„¤ì •</h5>
        
        <div class="p-3 bg-white rounded mb-3 border">
            <div class="section-title text-success">ê³µí†µ ì…ë ¥ ë°ì´í„° (Doc 1 & ì‘ì„± API ê³µìš©)</div>
            <div class="row g-2 mb-2">
                <div class="col-md-4">
                    <input type="text" id="targetEmail" class="form-control form-control-sm" placeholder="ìˆ˜ì‹ ì Email">
                </div>
                <div class="col-md-4">
                    <input type="text" id="targetName" class="form-control form-control-sm" placeholder="ìˆ˜ì‹ ì ì´ë¦„">
                </div>
                <div class="col-md-4">
                    <input type="text" id="targetPhone" class="form-control form-control-sm" placeholder="ìˆ˜ì‹ ì ì—°ë½ì²˜">
                </div>
            </div>
            
            <div class="d-flex justify-content-between align-items-center mb-1">
                <span class="small text-muted fw-bold">ì…ë ¥ í•„ë“œ (Fields - Doc 1 / ê³µìš©)</span>
                <button class="btn btn-sm btn-outline-success py-0" onclick="addFieldRow('fieldsContainer')">+ í•„ë“œ ì¶”ê°€</button>
            </div>
            <div id="fieldsContainer"></div>
        </div>

        <div class="section-title">A. ìƒˆ ë¬¸ì„œ ì‘ì„± (OPA 005 - ë‚´ë¶€ì)</div>
        <div class="row g-3 mb-2">
            <div class="col-md-4">
                <label class="form-label small fw-bold">Template ID (Doc 1)</label>
                <input type="text" id="targetTemplateId" class="form-control form-control-sm" placeholder="ë‚´ë¶€ìš© í…œí”Œë¦¿ ID">
            </div>
        </div>

        <div class="separator"></div>

        <div class="section-title text-primary">B. ìƒˆ ë¬¸ì„œ ì‘ì„± (OPA 007 - ì™¸ë¶€ì)</div>
        <div class="row g-3 mb-2">
            <div class="col-md-4">
                <label class="form-label small fw-bold">Company ID</label>
                <input type="text" id="companyId" class="form-control form-control-sm" placeholder="íšŒì‚¬ ID">
            </div>
            <div class="col-md-4">
                <label class="form-label small fw-bold">External Template ID</label>
                <input type="text" id="extTemplateId" class="form-control form-control-sm" placeholder="ì™¸ë¶€ìš© í…œí”Œë¦¿ ID">
            </div>
            <div class="col-md-4">
                <label class="form-label small fw-bold text-danger">Company API Key</label>
                <input type="text" id="companyApiKey" class="form-control form-control-sm border-danger" placeholder="API Key (Base64 ìë™ ë³€í™˜ë¨)">
            </div>
        </div>

        <div class="separator"></div>

        <div class="section-title">C. ë‹¤ìš´ë¡œë“œ í…ŒìŠ¤íŠ¸ìš© ID</div>
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label small">ì™„ë£Œëœ ë¬¸ì„œ ID (OPA 004ìš©)</label>
                <input type="text" id="downloadDocId" class="form-control form-control-sm" placeholder="ì™„ë£Œ ë¬¸ì„œ ID">
            </div>
            <div class="col-md-6">
                <label class="form-label small">ì²¨ë¶€íŒŒì¼ í¬í•¨ ë¬¸ì„œ ID (OPA 006ìš©)</label>
                <input type="text" id="attachDocId" class="form-control form-control-sm" placeholder="ì²¨ë¶€íŒŒì¼ ë¬¸ì„œ ID">
            </div>
        </div>

        <div class="separator"></div>

        <div class="section-title text-warning">D. ë©¤ë²„ & ê·¸ë£¹ ê´€ë¦¬</div>
        <div class="row g-3 mb-2">
            <div class="col-md-6">
                <label class="form-label small fw-bold text-warning">í…ŒìŠ¤íŠ¸í•  ë©¤ë²„ ID</label>
                <input type="text" id="memberId" class="form-control form-control-sm border-warning" value="test123456@test1234.com">
            </div>
        </div>

        <div class="separator"></div>

        <div class="section-title text-info">E. ë©€í‹° í…œí”Œë¦¿ ì‘ì„± ì¶”ê°€ ì„¤ì • (OPA 021 - Doc 2)</div>
        <div class="p-3 bg-white rounded border border-info">
            <div class="row g-2 mb-2">
                <div class="col-md-3">
                    <label class="form-label small fw-bold">Template ID 2 *</label>
                    <input type="text" id="targetTemplateId2" class="form-control form-control-sm" placeholder="ë‘ ë²ˆì§¸ í…œí”Œë¦¿ ID">
                </div>
                <div class="col-md-3">
                    <label class="form-label small">ìˆ˜ì‹ ì Email 2</label>
                    <input type="text" id="targetEmail2" class="form-control form-control-sm" placeholder="Doc 2 ìˆ˜ì‹ ì Email">
                </div>
                <div class="col-md-3">
                    <label class="form-label small">ìˆ˜ì‹ ì ì´ë¦„ 2</label>
                    <input type="text" id="targetName2" class="form-control form-control-sm" placeholder="Doc 2 ìˆ˜ì‹ ì ì´ë¦„">
                </div>
                <div class="col-md-3">
                    <label class="form-label small">ìˆ˜ì‹ ì ì—°ë½ì²˜ 2</label>
                    <input type="text" id="targetPhone2" class="form-control form-control-sm" placeholder="Doc 2 ìˆ˜ì‹ ì ì—°ë½ì²˜">
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-1 mt-2">
                <span class="small text-muted fw-bold text-info">ì…ë ¥ í•„ë“œ (Fields - Doc 2 ì „ìš©)</span>
                <button class="btn btn-sm btn-outline-info py-0" onclick="addFieldRow('fieldsContainer2')">+ Doc 2 í•„ë“œ ì¶”ê°€</button>
            </div>
            <div id="fieldsContainer2"></div>
        </div>

        <div class="separator"></div>

        <div class="section-title text-success">F. ì¼ê´„ PDF ì „ì†¡ ìˆ˜ì‹ ì (OPA 037)</div>
        <div class="row g-3">
            <div class="col-md-4">
                <label class="form-label small fw-bold">PDF ìˆ˜ì‹ ì ì´ë¦„</label>
                <input type="text" id="pdfTargetName" class="form-control form-control-sm" value="PDF ìˆ˜ì‹ ì">
            </div>
            <div class="col-md-4">
                <label class="form-label small fw-bold">PDF ìˆ˜ì‹ ì Email</label>
                <input type="text" id="pdfTargetEmail" class="form-control form-control-sm" placeholder="email@test.com">
            </div>
            <div class="col-md-4">
                <label class="form-label small fw-bold">PDF ìˆ˜ì‹ ì ì—°ë½ì²˜</label>
                <input type="text" id="pdfTargetPhone" class="form-control form-control-sm" placeholder="01012345678">
            </div>
        </div>
    </div>

    <button class="btn btn-primary w-100 mb-4 py-2 fw-bold" onclick="runAllTests()">ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‹œì‘ â–¶</button>

    <h5 id="progressText">ëŒ€ê¸° ì¤‘...</h5>
    <div class="progress mb-3">
        <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
    </div>

    <table class="table table-hover table-bordered align-middle">
        <thead class="table-light text-center">
            <tr>
                <th width="5%">No.</th>
                <th width="40%">API ì´ë¦„ / Endpoint</th>
                <th width="10%">Method</th>
                <th width="10%">ìƒíƒœ</th>
                <th width="10%">ì‹œê°„</th>
                <th>ìƒì„¸ ì •ë³´</th>
            </tr>
        </thead>
        <tbody id="resultTableBody"></tbody>
    </table>
</div>

<script src="/assets/js/ApiAutoTestStart.js">
 
</script>

</body>
</html>