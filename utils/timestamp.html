<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unix ì‹œê°„ ë³€í™˜ ìœ í‹¸ë¦¬í‹° (ë‹¤ì¤‘ ë‹¨ìœ„)</title>
  <style>
    :root { --bg:#1d1f21; --card:#282a2e; --muted:#969896; --text:#c5c8c6; --accent:#81a2be; --input-bg:#373b41; --error:#cc6666; }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif; line-height: 1.6; }
    .wrap { max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
    h1 { text-align: center; color: var(--accent); }
    h2 { margin-top: 0; }
    .card { background: var(--card); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--input-bg); }
    label { display: block; font-weight: 600; margin-bottom: 0.5rem; color: var(--muted); }
    input[type="text"], input[type="datetime-local"], select {
      padding: 0.75rem;
      background: var(--input-bg);
      border: 1px solid #444;
      border-radius: 8px;
      color: var(--text);
      font-size: 1rem;
      font-family: 'Menlo', 'Consolas', monospace;
    }
    .input-group { display: flex; gap: 0.5rem; }
    .input-group input { flex-grow: 1; width: 100%; }
    .input-group select { flex-shrink: 0; }
    .btn-group { display: flex; gap: 0.75rem; margin-top: 1rem; }
    .btn {
      flex-grow: 1;
      padding: 0.75rem;
      background: var(--accent);
      color: var(--bg);
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn:hover { background: #9abed9; }
    .btn.secondary { background: var(--input-bg); color: var(--text); }
    .btn.secondary:hover { background: #4a4f58; }
    
    /* ì—ëŸ¬ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
    .error-msg {
        color: var(--error);
        font-size: 0.9rem;
        margin-top: 0.5rem;
        display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
        font-weight: bold;
    }

    .results { margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--input-bg); }
    .result-item {
      display: grid;
      grid-template-columns: 150px 1fr;
      align-items: center;
      margin-bottom: 0.75rem;
      padding: 0.5rem;
      background: var(--input-bg);
      border-radius: 6px;
    }
    .result-item strong { color: var(--muted); }
    .result-item span { font-family: 'Menlo', 'Consolas', monospace; color: var(--text); word-break: break-all; }
    
    @media (max-width: 600px) {
        .result-item { grid-template-columns: 1fr; gap: 0.25rem; }
        .btn-group { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Epoch & Date Converter ğŸ•°ï¸</h1>

    <div class="card">
      <h2>Timestamp â†’ ë‚ ì§œ/ì‹œê°„</h2>
      <label for="unix-input">íƒ€ì„ìŠ¤íƒ¬í”„</label>
      <div class="input-group">
        <input type="text" id="unix-input" placeholder="íƒ€ì„ìŠ¤íƒ¬í”„ ì…ë ¥..." />
        <select id="unit-select-from">
          <option value="s">Seconds (s)</option>
          <option value="ms" selected>Milliseconds (ms)</option>
          <option value="us">Microseconds (Î¼s)</option>
          <option value="ns">Nanoseconds (ns)</option>
        </select>
      </div>
      <div id="unix-input-error" class="error-msg"></div>

      <div class="btn-group">
        <button class="btn" id="btn-to-date">ë³€í™˜</button>
        <button class="btn secondary" id="btn-now-unix">í˜„ì¬ ì‹œê°„</button>
      </div>
      <div class="results" id="date-results-container" style="display: none;">
        <div class="result-item">
          <strong>GMT (UTC)</strong>
          <span id="result-gmt"></span>
        </div>
        <div class="result-item">
          <strong>ë‚´ ì‹œê°„ëŒ€</strong>
          <span id="result-local"></span>
        </div>
        <div class="result-item">
          <select id="tz-select" style="width: 100%; margin-bottom: 5px;"></select>
          <span id="result-custom"></span>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>ë‚ ì§œ/ì‹œê°„ â†’ Timestamp</h2>
      <label for="date-input">ë‚ ì§œì™€ ì‹œê°„</label>
      <input type="datetime-local" id="date-input" />
      <div class="btn-group">
        <button class="btn" id="btn-to-unix">ë³€í™˜</button>
        <button class="btn secondary" id="btn-now-date">í˜„ì¬ ì‹œê°„</button>
      </div>
      <div class="results" id="unix-results-container" style="display: none;">
        <div class="input-group" style="margin-bottom: 0.75rem;">
            <label style="flex-grow:1; margin:auto 0;">ì¶œë ¥ ë‹¨ìœ„</label>
            <select id="unit-select-to">
              <option value="s">Seconds (s)</option>
              <option value="ms" selected>Milliseconds (ms)</option>
              <option value="us">Microseconds (Î¼s)</option>
              <option value="ns">Nanoseconds (ns)</option>
            </select>
        </div>
        <div class="result-item">
          <strong id="result-unix-label">Timestamp</strong>
          <span id="result-unix"></span>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function() {
      // --- DOM ìš”ì†Œ ---
      const unixInput = document.getElementById('unix-input');
      const dateInput = document.getElementById('date-input');
      const unitSelectFrom = document.getElementById('unit-select-from');
      const unitSelectTo = document.getElementById('unit-select-to');
      const tzSelect = document.getElementById('tz-select');
      const dateResultsContainer = document.getElementById('date-results-container');
      const unixResultsContainer = document.getElementById('unix-results-container');
      const unixInputError = document.getElementById('unix-input-error'); // ì—ëŸ¬ ë©”ì‹œì§€ ìš”ì†Œ

      // --- ì‹œê°„ëŒ€ ëª©ë¡ ---
      const timezones = [
        'UTC', 'Asia/Seoul', 'Asia/Tokyo', 'America/New_York', 'America/Los_Angeles',
        'Europe/London', 'Europe/Paris', 'Australia/Sydney', 'Asia/Shanghai', 'Asia/Dubai'
      ];
      timezones.forEach(tz => {
        const option = document.createElement('option');
        option.value = tz;
        option.textContent = tz;
        if (tz === 'Asia/Seoul') option.selected = true;
        tzSelect.appendChild(option);
      });

      // --- ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜ ---
      function validateTimestamp(valueStr, unit) {
        const len = valueStr.length;
        
        // í˜„ëŒ€(1970ë…„ëŒ€ ì´í›„ ~ ê°€ê¹Œìš´ ë¯¸ë˜) ì‹œê°„ëŒ€ ê¸°ì¤€ ìë¦¿ìˆ˜ ì²´í¬
        // s: 10ìë¦¬ (ex: 1700000000)
        // ms: 13ìë¦¬
        // us: 16ìë¦¬
        // ns: 19ìë¦¬
        
        // ë„ˆë¬´ ê´€ëŒ€í•˜ì§€ ì•Šê²Œ, ì¼ë°˜ì ì¸ "ì‹¤ìˆ˜"ë¥¼ ì¡ì„ ìˆ˜ ìˆëŠ” ë²”ìœ„ ì„¤ì •
        if (unit === 's') {
            if (len >= 12) return "ì…ë ¥ê°’ì´ 'ì´ˆ(s)' ë‹¨ìœ„ì¹˜ê³  ë„ˆë¬´ ê¹ë‹ˆë‹¤. ë°€ë¦¬ì´ˆ(ms)ë‚˜ ë§ˆì´í¬ë¡œì´ˆ(Î¼s)ê°€ ì•„ë‹Œê°€ìš”?";
        } 
        else if (unit === 'ms') {
            if (len <= 11) return "ì…ë ¥ê°’ì´ 'ë°€ë¦¬ì´ˆ(ms)' ë‹¨ìœ„ì¹˜ê³  ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ì´ˆ(s) ë‹¨ìœ„ê°€ ì•„ë‹Œê°€ìš”?";
            if (len >= 15) return "ì…ë ¥ê°’ì´ 'ë°€ë¦¬ì´ˆ(ms)' ë‹¨ìœ„ì¹˜ê³  ë„ˆë¬´ ê¹ë‹ˆë‹¤. ë§ˆì´í¬ë¡œì´ˆ(Î¼s)ê°€ ì•„ë‹Œê°€ìš”?";
        }
        else if (unit === 'us') {
            if (len <= 14) return "ì…ë ¥ê°’ì´ 'ë§ˆì´í¬ë¡œì´ˆ(Î¼s)' ë‹¨ìœ„ì¹˜ê³  ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ë°€ë¦¬ì´ˆ(ms)ê°€ ì•„ë‹Œê°€ìš”?";
            if (len >= 18) return "ì…ë ¥ê°’ì´ 'ë§ˆì´í¬ë¡œì´ˆ(Î¼s)' ë‹¨ìœ„ì¹˜ê³  ë„ˆë¬´ ê¹ë‹ˆë‹¤. ë‚˜ë…¸ì´ˆ(ns)ê°€ ì•„ë‹Œê°€ìš”?";
        }
        else if (unit === 'ns') {
            if (len <= 17) return "ì…ë ¥ê°’ì´ 'ë‚˜ë…¸ì´ˆ(ns)' ë‹¨ìœ„ì¹˜ê³  ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ë§ˆì´í¬ë¡œì´ˆ(Î¼s)ê°€ ì•„ë‹Œê°€ìš”?";
        }
        return null; // ë¬¸ì œ ì—†ìŒ
      }

      // --- ë³€í™˜ í•¨ìˆ˜ (BigInt ì‚¬ìš©) ---
      function convertFromTimestamp() {
        // 1. ì´ˆê¸°í™”
        unixInputError.style.display = 'none';
        unixInputError.textContent = '';
        dateResultsContainer.style.display = 'none';

        const val = unixInput.value.trim();
        if (!val) return; // ë¹„ì–´ìˆìœ¼ë©´ ë¬´ì‹œ

        if (!val.match(/^[0-9]+$/)) {
          showError('ìˆ«ìë§Œ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
          return;
        }

        const unit = unitSelectFrom.value;

        // 2. ë‹¨ìœ„ ë¶ˆì¼ì¹˜ ê²€ì¦ ë¡œì§ ìˆ˜í–‰
        const warningMsg = validateTimestamp(val, unit);
        if (warningMsg) {
            showError(warningMsg);
            return; // ì—ëŸ¬ê°€ ìˆìœ¼ë©´ ë³€í™˜ ì¤‘ë‹¨
        }

        // 3. ë³€í™˜ ë¡œì§
        const timestamp = BigInt(val);
        let millis;

        if (unit === 's') millis = timestamp * 1000n;
        else if (unit === 'ms') millis = timestamp;
        else if (unit === 'us') millis = timestamp / 1000n;
        else if (unit === 'ns') millis = timestamp / 1000000n;

        const date = new Date(Number(millis)); // Date ê°ì²´ëŠ” Numberë¥¼ ì¸ìë¡œ ë°›ìŒ

        // ì—°ë„ ì²´í¬ (ë„ˆë¬´ í„°ë¬´ë‹ˆ ì—†ëŠ” ì—°ë„ê°€ ë‚˜ì˜¤ë©´ ì¶”ê°€ ë°©ì–´)
        if (date.getFullYear() < 1970 || date.getFullYear() > 3000) {
            showError(`ë³€í™˜ëœ ì—°ë„ê°€ ${date.getFullYear()}ë…„ ì…ë‹ˆë‹¤. ì„ íƒí•œ ë‹¨ìœ„ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.`);
            return;
        }

        const gmtFormatter = new Intl.DateTimeFormat('en-US', { timeZone: 'UTC', year: 'numeric', month: 'long', day: '2-digit', weekday: 'long', hour: 'numeric', minute: '2-digit', second: '2-digit', hour12: true });
        document.getElementById('result-gmt').textContent = gmtFormatter.format(date);

        const localFormatter = new Intl.DateTimeFormat('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long', hour: 'numeric', minute: '2-digit', second: '2-digit', hour12: true });
        document.getElementById('result-local').textContent = localFormatter.format(date);
        
        updateCustomTime(date);
        dateResultsContainer.style.display = 'block';
      }

      function showError(msg) {
          unixInputError.textContent = `âš ï¸ ${msg}`;
          unixInputError.style.display = 'block';
      }

      function convertFromDate() {
        if (!dateInput.value) {
          alert('ë‚ ì§œì™€ ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”.');
          return;
        }
        const date = new Date(dateInput.value);
        const millis = BigInt(date.getTime());
        const unit = unitSelectTo.value;
        let result;

        if (unit === 's') result = millis / 1000n;
        else if (unit === 'ms') result = millis;
        else if (unit === 'us') result = millis * 1000n;
        else if (unit === 'ns') result = millis * 1000000n;

        document.getElementById('result-unix-label').textContent = `Timestamp (${unit})`;
        document.getElementById('result-unix').textContent = result.toString();
        unixResultsContainer.style.display = 'block';
      }
      
      function updateCustomTime(dateObj) {
        // ì´ í•¨ìˆ˜ëŠ” ì´ë¯¸ ê²€ì¦ëœ dateObjê°€ ë„˜ì–´ì˜¤ê±°ë‚˜, ì¬ê³„ì‚°ì´ í•„ìš”í•  ë•Œ í˜¸ì¶œë¨
        if(!dateObj) {
            // ì¬ê³„ì‚° ì‹œì—ëŠ” convertFromTimestampë¥¼ ë‹¤ì‹œ íƒ€ì§€ ì•Šê³  ê°’ë§Œ í¬ë§·íŒ…í•˜ë ¤ í•  ìˆ˜ ìˆìœ¼ë‚˜,
            // ì•ˆì „í•˜ê²Œ ë¡œì§ì„ ë¶„ë¦¬í•˜ì§€ ì•Šê³  ì—¬ê¸°ì„œëŠ” dateObjê°€ ìˆì„ ë•Œë§Œ ì²˜ë¦¬í•˜ë„ë¡ ë‹¨ìˆœí™”
             return; 
        }
        const selectedTz = tzSelect.value;
        const customFormatter = new Intl.DateTimeFormat('ko-KR', { timeZone: selectedTz, year: 'numeric', month: 'long', day: 'numeric', weekday: 'long', hour: 'numeric', minute: '2-digit', second: '2-digit', hour12: true });
        document.getElementById('result-custom').textContent = customFormatter.format(dateObj);
      }

      // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---
      document.getElementById('btn-to-date').addEventListener('click', convertFromTimestamp);
      document.getElementById('btn-to-unix').addEventListener('click', convertFromDate);
      unitSelectTo.addEventListener('change', convertFromDate); 
      
      // select ë°•ìŠ¤ ë³€ê²½ ì‹œ ê²°ê³¼ê°€ ë–  ìˆë‹¤ë©´ ë°”ë¡œ ì¬ê²€ì¦/ì¬ë³€í™˜
      unitSelectFrom.addEventListener('change', () => {
          if(unixInput.value) convertFromTimestamp();
      });

      tzSelect.addEventListener('change', () => {
         // í˜„ì¬ ê²°ê³¼ì°½ì´ ë– ìˆì„ ë•Œë§Œ ì—…ë°ì´íŠ¸
         if(dateResultsContainer.style.display === 'block') {
             // ì›ë³¸ ë°ì´í„°ë¥¼ ë‹¤ì‹œ íŒŒì‹±í•˜ëŠ” ê²ƒë³´ë‹¤ í˜„ì¬ ë¡œì§ìƒ convertFromTimestampë¥¼ í˜¸ì¶œí•˜ëŠ”ê²Œ ì•ˆì „
             convertFromTimestamp();
         }
      });
      
      document.getElementById('btn-now-unix').addEventListener('click', () => {
          const unit = unitSelectFrom.value;
          const nowMillis = BigInt(Date.now());
          let now;
          if (unit === 's') now = nowMillis / 1000n;
          else if (unit === 'ms') now = nowMillis;
          else if (unit === 'us') now = nowMillis * 1000n;
          else if (unit === 'ns') now = nowMillis * 1000000n;
          unixInput.value = now.toString();
          convertFromTimestamp();
      });

      document.getElementById('btn-now-date').addEventListener('click', () => {
          const now = new Date();
          now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
          const localISOString = now.toISOString().slice(0, 19);
          dateInput.value = localISOString;
          convertFromDate();
      });

    })();
  </script>
</body>
</html>