<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>로그인</title>
  <style>
    body { display:flex; justify-content:center; align-items:center; height:100vh; font-family:sans-serif; background:#f7f7f7; margin:0; }
    .login-box { padding:40px; background:#fff; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); text-align:center; width:min(380px, 92vw); }
    h2 { margin:0 0 8px; }
    p  { margin:6px 0; color:#444; }
    input { width:100%; padding:10px; margin:10px 0 16px; border:1px solid #ccc; border-radius:5px; }
    button { width:100%; padding:10px 20px; background:#0070f3; color:#fff; border:none; border-radius:5px; cursor:pointer; }
    .error { color:#d00; margin-bottom:10px; min-height:1.2em; }
    .muted { color:#666; font-size:12px; }
  </style>
</head>
<body>
  <div class="login-box">
    <h2 id="title">보호 페이지 접근</h2>
    <p id="subtitle">이 페이지는 인증된 사용자만 접근할 수 있습니다.</p>

    <form action="/api/login" method="POST">
      <input type="password" name="password" placeholder="암호" required>
      <input type="hidden" name="next" id="next">
      <button type="submit">로그인</button>
    </form>

    <p id="errorMessage" class="error"></p>
    <p class="muted">암호 발급은 관리자에게 문의하세요.</p>
  </div>

  <script>
    // 쿼리 파라미터 처리: ?error=1 & ?next=/원래경로
    const params = new URLSearchParams(window.location.search);
    if (params.has('error')) {
      document.getElementById('errorMessage').textContent = '암호가 올바르지 않습니다.';
    }

    // next 기본값: 제공되면 그대로, 없으면 홈(/) 또는 공용 보호 페이지로
    const next = params.get('next') || '/';
    document.getElementById('next').value = next;

    // next 경로에 따라 타이틀/서브타이틀을 조금 더 친절하게
    const titleEl = document.getElementById('title');
    const subtitleEl = document.getElementById('subtitle');

    const prettyName = (path) => {
      if (path.startsWith('/templatecopy')) return '템플릿 복제 페이지 접근';
      if (path.startsWith('/private/Member.html') || path.startsWith('/member')) return '멤버 페이지 접근';
      // 필요 시 케이스 확장
      return '보호 페이지 접근';
    };

    titleEl.textContent = prettyName(next);
    // 필요 시 subtitle도 상세하게 커스터마이즈 가능
  </script>
</body>
</html>
