<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IdP Initiated SSO Test</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: #f4f4f9; margin: 0; padding: 20px; box-sizing: border-box; }
        .card { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 800px; text-align: center; position: relative; }
        h2 { color: #333; margin-bottom: 1.5rem; font-size: 1.4rem; word-break: keep-all; }
        .form-group { margin-bottom: 1rem; text-align: left; }
        label { display: block; margin-bottom: 0.5rem; color: #666; font-size: 0.9rem; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
        button { width: 100%; padding: 12px; background-color: #0070f3; color: white; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer; transition: background 0.2s; font-weight: bold; }
        button:hover { background-color: #0051a2; }
        .note { margin-top: 1rem; font-size: 0.8rem; color: #888; }
        
        /* ìƒë‹¨ ê³µì§€ ìŠ¤íƒ€ì¼ */
        .notice { margin-bottom: 20px; background: #fffae6; color: #665c00; padding: 15px; border: 1px solid #ffe58f; border-radius: 8px; font-size: 0.85rem; text-align: left; line-height: 1.5; width: 100%; max-width: 700px; box-sizing: border-box; }
        .notice p { margin: 5px 0; }
        .notice strong { color: #d63031; }

        /* í•˜ë‹¨ ì„¤ëª…(Accordion) ìŠ¤íƒ€ì¼ */
        details { margin-top: 15px; text-align: left; border-top: 1px solid #eee; padding-top: 15px; }
        summary { cursor: pointer; font-size: 0.9rem; font-weight: bold; color: #444; list-style: none; display: flex; align-items: center; justify-content: center; padding: 5px; }
        summary:hover { background-color: #f8f9fa; border-radius: 5px; }
        summary::after { content: " â–¼"; font-size: 0.7rem; margin-left: 5px; }
        details[open] summary::after { content: " â–²"; }
        
        .explanation { font-size: 0.85rem; color: #555; background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px; line-height: 1.6; border: 1px solid #e9ecef; }
        .step { display: flex; margin-bottom: 10px; align-items: flex-start; }
        .step-num { flex-shrink: 0; background: #0070f3; color: white; width: 20px; height: 20px; border-radius: 50%; text-align: center; line-height: 20px; font-size: 0.75rem; margin-right: 10px; margin-top: 2px; font-weight: bold; }
        
        /* ë‹¤ì´ì–´ê·¸ë¨ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        .flow-image { width: 100%; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 15px; }
        
        /* ë§í¬ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .test-link { color: #0070f3; text-decoration: none; font-weight: bold; display: inline-block; margin-top: 4px; }
        .test-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div style="display:flex; flex-direction: column; align-items: center; width: 100%;">
        
        <div class="notice">
            <p>â„¹ï¸ í•´ë‹¹ í˜ì´ì§€ëŠ” <b>eformsign test ì„œë²„</b>ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.</p>
            <p>â€¢ í˜„ì¬ <b>@test.co.kr</b> ë„ë©”ì¸ë§Œ í—ˆìš©ë˜ë„ë¡ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. (ì‹¤ì œ ì—°ë™ ì‹œì—ëŠ” ì›í•˜ëŠ” ë„ë©”ì¸ìœ¼ë¡œ ì„¤ì •í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</p>
            <p>â€¢ ë°”ë¡œê°€ê¸°ë¥¼ ëˆ„ë¥´ì‹œë©´ https://test-kr-service.eformsign.com/v1.0/saml_redirect ë¡œ saml responseê°€ ì „ì†¡ë˜ë©° eformsign ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë©ë‹ˆë‹¤.</p>
            <p>â€¢ ë¡œê·¸ì¸ ì‹œ <b>ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</b> íŒì—… ë°œìƒ í›„ ë¡œê·¸ì¸ì´ ë˜ëŠ”ë° ì´ëŠ” name attributeê°’ì„ ì „ë‹¬ ì•ˆí•˜ì—¬ ë°œìƒí•œ í˜„ìƒìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ í˜„ìƒì´ë‚˜ <strong>ì‹¤ì œ ì—°ë™ ì‹œì—ëŠ” name attributeê°’ì„ ë°˜ë“œì‹œ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.</strong></p>
        </div>

        <div class="card">
            <h2>IdP â†’ ì´í¼ì‚¬ì¸(SP)<br>SSO ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h2>
            <p style="color:#666; font-size: 0.9rem; margin-bottom: 20px;">
                ì‚¬ìš©ìê°€ ë³„ë„ ë¡œê·¸ì¸ ì—†ì´,<br>ë²„íŠ¼ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ì´í¼ì‚¬ì¸ì— ì ‘ì†í•©ë‹ˆë‹¤.
            </p>
            
            <form action="/api/idp-initiated-login" method="POST">
                <div class="form-group">
                    <label>ì‚¬ìš©ì ì´ë©”ì¼ (ID)</label>
                    <input type="email" name="email" value="test@test.co.kr" required>
                </div>
                <div class="form-group">
                    <label>ì‚¬ìš©ì ì´ë¦„</label>
                    <input type="text" name="name" value="í…ŒìŠ¤íŠ¸ìœ ì €" required>
                </div>
                
                <button type="submit">eformsign ë°”ë¡œê°€ê¸° ğŸš€</button>
            </form>
            
            <p class="note">â€» IdP Initiated SSO (ë¬´ê²€ì¦ ë¡œê·¸ì¸) í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.</p>

            <details>
                <summary>ğŸ› ï¸ ì´ í˜ì´ì§€ì˜ ì‘ë™ ì›ë¦¬ê°€ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?</summary>
                <div class="explanation">
                    <p style="margin-top:0; font-weight:bold; color:#333; border-bottom:1px solid #ddd; padding-bottom:5px; margin-bottom:10px;">
                        IdP Initiated SSO í”„ë¡œì„¸ìŠ¤ (ì¦‰ì‹œ ì‹¤í–‰)
                    </p>
                    
                    <div class="step">
                        <span class="step-num">1</span>
                        <span>ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì…ë ¥ëœ ì •ë³´ê°€ ë‚´ë¶€ ì„œë²„ API(<code>/api/idp-initiated-login</code>)ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.</span>
                    </div>
                    
                    <div class="step">
                        <span class="step-num">2</span>
                        <span>ì„œë²„(IdP)ëŠ” ë¹„ë°€í‚¤(Private Key)ë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ì ì •ë³´ë¥¼ ì•”í˜¸í™” ì„œëª…í•œ <strong>SAML Response(XML)</strong>ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</span>
                    </div>
                    
                    <div class="step">
                        <span class="step-num">3</span>
                        <span>ì„œë²„ëŠ” ìƒì„±ëœ ë°ì´í„°ë¥¼ ë‹´ì€ <strong>ìˆ¨ê²¨ì§„ í¼(Hidden Form)</strong>ì„ ë¸Œë¼ìš°ì €ì— ì‘ë‹µìœ¼ë¡œ ë³´ëƒ…ë‹ˆë‹¤.</span>
                    </div>

                    <div class="step">
                        <span class="step-num">4</span>
                        <span>ë¸Œë¼ìš°ì €ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ì´ í¼ì„ <strong>ì´í¼ì‚¬ì¸ì˜ SAML Redirect URL</strong>ë¡œ ìë™ ì „ì†¡(POST)í•©ë‹ˆë‹¤.</span>
                    </div>

                    <div class="step">
                        <span class="step-num">5</span>
                        <span>ì´í¼ì‚¬ì¸ì€ ì„œëª…ì„ ê²€ì¦í•˜ê³ , ìœ íš¨í•œ ê²½ìš° ì¦‰ì‹œ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</span>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ” eformsign ì „ì²´ ë¡œê·¸ì¸ ê³¼ì •ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?</summary>
                <div class="explanation">
                    <img src="/img/sso_flow.png" alt="eformsign SAML SSO Flow" class="flow-image" onerror="this.style.display='none'">
                    
                    <p style="margin-top:0; font-weight:bold; color:#333; border-bottom:1px solid #ddd; padding-bottom:5px; margin-bottom:10px;">
                        eformsign SAML 2.0 SSO ë¡œê·¸ì¸ íë¦„
                    </p>

                    <div class="step">
                        <span class="step-num">1</span>
                        <span>
                            <strong>ë¡œê·¸ì¸ ì‹œë„:</strong> ì‚¬ìš©ìê°€ eformsign ì ‘ì† í›„ ë¡œê·¸ì¸ ì°½ì— ID(ì´ë©”ì¼)ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.<br>
                            <a href="https://test.eformsign.com/login.html" target="_blank" class="test-link">ğŸ‘‰ ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ê¸°!</a>
                            <br><span style="font-size:0.8rem; color:#888;">(ìƒˆ ì°½ì—ì„œ IDì— <code>test@test.co.kr</code> ì…ë ¥)</span>
                        </span>
                    </div>

                    <div class="step">
                        <span class="step-num">2</span>
                        <span><strong>ë„ë©”ì¸ ê²€ì¦:</strong> eformsignì€ ì…ë ¥ëœ IDì˜ ë„ë©”ì¸(@test.co.kr)ì„ í™•ì¸í•˜ì—¬ SSO ì—°ë™ ì—¬ë¶€ë¥¼ íŒë‹¨í•©ë‹ˆë‹¤.</span>
                    </div>

                    <div class="step">
                        <span class="step-num">3</span>
                        <span><strong>ë¦¬ë‹¤ì´ë ‰íŠ¸:</strong> ì—°ë™ëœ ë„ë©”ì¸ì¸ ê²½ìš°, ì‚¬ìš©ìë¥¼ ê³ ê°ì‚¬ì˜ <strong>IdP ë¡œê·¸ì¸ í˜ì´ì§€</strong>ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.</span>
                    </div>

                    <div class="step">
                        <span class="step-num">4</span>
                        <span><strong>ì¸ì¦ ë° ë°ì´í„° ì¤€ë¹„:</strong> ê³ ê°ì‚¬ ì„œë²„(IdP)ì—ì„œ ë¡œê·¸ì¸ì„ ìˆ˜í–‰í•˜ê³ , ì‚¬ìš©ì ì •ë³´(NameID, Email, Name)ë¥¼ ë‹´ì€ ë°ì´í„°ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.</span>
                    </div>

                    <div class="step">
                        <span class="step-num">5</span>
                        <span><strong>ì •ë³´ ì „ë‹¬ (Response):</strong> IdPëŠ” ì „ì ì„œëª…ëœ <strong>SAML Response</strong>ë¥¼ ìƒì„±í•˜ì—¬ ì´í¼ì‚¬ì¸ìœ¼ë¡œ ë‹¤ì‹œ ë³´ëƒ…ë‹ˆë‹¤.</span>
                    </div>

                    <div class="step">
                        <span class="step-num">6</span>
                        <span><strong>ìµœì¢… ë¡œê·¸ì¸:</strong> eformsignì€ ì „ë‹¬ë°›ì€ ì„œëª…ì„ ê²€ì¦í•˜ê³ , ì¼ì¹˜í•˜ëŠ” ë©¤ë²„ê°€ ìˆìœ¼ë©´ ë¡œê·¸ì¸ì„ ì™„ë£Œí•©ë‹ˆë‹¤. (ì—†ìœ¼ë©´ íšŒì›ê°€ì… ì´ë™)</span>
                    </div>
                </div>
            </details>

        </div>
    </div>
</body>
</html>